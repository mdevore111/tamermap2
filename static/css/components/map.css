/* InfoWindow content tweaks */
.info-window {
  max-width: 320px;
}
.info-window .iw-header { margin: 0 0 4px !important; }
.info-window .iw-icon { width: 30px !important; height: 30px !important; }
.info-window .iw-title { font-size: 21px !important; line-height: 1.12 !important; }

/* Slightly tighter layout on small screens */
@media (max-width: 768px) {
  .info-window { padding: 6px 8px !important; }
  .info-window .iw-icon { width: 28px !important; height: 28px !important; }
  .info-window .iw-title { font-size: 20px !important; line-height: 1.1 !important; }
  .info-window p { margin: 4px 0 !important; font-size: 13px !important; }
}
/* ========================================================================== */
/* MAP CONTAINER */
/* ========================================================================== */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

/* New Map Container */
.map-container {
  flex: 1; /* Make the container fill the available space in #main-content */
  position: relative; /* Establish a positioning context for children */
}

#map {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1; /* Base z-index for the map */
}

/* Ensure map has proper stacking context */
.gm-style {
  position: relative;
  z-index: 0;
}

/* Keep default Google stacking; avoid overriding container order to prevent layout glitches */

/* Ensure InfoWindow content is visible and not clipped */
.gm-style-iw {
  z-index: 9999 !important;
  /* position override removed to keep Google default behavior */
}

.gm-style-iw-c {
  z-index: 9999 !important;
  /* position override removed to keep Google default behavior */
}

/* Ensure proper stacking context for Google Maps elements */
.gm-style-pbc, 
.gm-style > button, 
.gm-svpc,
.gmnoprint {
  z-index: 1000 !important; /* Controls appear above map and footer */
}

/* Set priority for Google Maps elements - simplified */
.gm-style-iw-a {
  z-index: 9000 !important;
  /* position override removed to keep Google default behavior */
}

/* Removed device-specific #map height override. The map fills via flex container. */

/* Map Controls - Desktop and General */
/* Hide default Google zoom controls on desktop (we use custom) */
.gm-style .gm-control-active.gm-zoom-in,
.gm-style .gm-control-active.gm-zoom-out {
    display: none !important;
}

/* Improve My Location button positioning on desktop - Google Maps style */
.my-location-button {
    position: absolute !important;
    top: 10px !important;
    right: 10px !important;
    margin: 0 !important;
    padding: 0 !important;
    z-index: 1000 !important;
    width: 40px !important;
    height: 40px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-radius: 2px !important;
    box-sizing: border-box !important;
    background-color: #fff !important;
    border: none !important;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3) !important;
    cursor: pointer !important;
    transition: background-color 0.2s !important;
}

/* Ensure Google Maps controls are positioned correctly */
.gm-style .gm-control-active {
    z-index: 1000 !important;
}

.my-location-button:hover {
    background-color: #f5f5f5 !important;
}

.my-location-button:active {
    background-color: #e0e0e0 !important;
}

/* Ensure SVG icon renders properly */
.my-location-button svg {
    width: 18px !important;
    height: 18px !important;
    display: block !important;
}

/* (kept hidden) */

/* Do not hide controls container (.gmnoprint) so custom controls remain visible */
.gm-style .gm-style-cc {
    display: none !important;
}

/* Allow InfoWindow content to be visible */
.gm-style .gm-style-iw {
    display: block !important;
}

/* Custom Zoom Controls - Google Maps style */
.custom-zoom-container {
    display: flex;
    flex-direction: column;
    gap: 0;
    z-index: 1000;
    margin: 50px 10px 10px 0 !important; /* tighter spacing under My Location */
}

.custom-zoom-button {
    width: 40px;
    height: 40px;
    background-color: #fff;
    border: none;
    border-radius: 2px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    transition: background-color 0.2s;
    padding: 0;
    margin: 0;
    position: relative;
}

/* Add divider line between zoom buttons */
.custom-zoom-button:first-child::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 1px;
    background-color: #e0e0e0;
}

.custom-zoom-button:hover {
    background-color: #f5f5f5;
}

.custom-zoom-button:active {
    background-color: #e0e0e0;
}

.custom-zoom-button svg {
    width: 18px;
    height: 18px;
    color: #333;
}

/* Hide zoom buttons on mobile devices only */
@media only screen and (max-width: 768px) {
    .gm-style .gm-control-active.gm-zoom-in,
    .gm-style .gm-control-active.gm-zoom-out {
        display: none !important;
    }
}

/* MISC Google Maps Overrides - simplified */
.gm-style-iw-chr {
  /* positioning overrides removed; use Google defaults */
  display: flex;
}

.gm-style-iw.gm-style-iw-c {
  padding-top: 5px !important;
}

/* Simplified z-index management to prevent conflicts */
/* Maintain high z-index for InfoWindow parts without altering positioning */
.gm-style-iw-c,
.gm-style-iw-d,
.gm-style-iw-t,
.gm-style-iw {
  z-index: 9000 !important;
}

/* Remove overly aggressive z-index overrides that could cause conflicts */

button.gm-ui-hover-effect {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  z-index: 1001 !important;
  top: 0 !important;
  right: 0 !important;
  background-color: transparent !important;
}

button.gm-ui-hover-effect img, 
button.gm-ui-hover-effect span {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Remove conflicting low z-index override that could cause flicker */
/* .gm-style-iw-c, .gm-style-iw-d, .gm-style-iw { z-index: 999 !important; } */