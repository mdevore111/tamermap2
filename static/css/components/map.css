/* ========================================================================== */
/* MAP CONTAINER */
/* ========================================================================== */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

/* New Map Container */
.map-container {
  flex: 1; /* Make the container fill the available space in #main-content */
  position: relative; /* Establish a positioning context for children */
}

#map {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1; /* Base z-index for the map */
}

/* Ensure map has proper stacking context */
.gm-style {
  position: relative;
  z-index: 0;
}

/* Override Google Maps InfoWindow stacking */
.gm-style > div:nth-of-type(1) {
  z-index: 0 !important; /* Map tiles */
}

.gm-style > div:nth-of-type(2) {
  z-index: 9000 !important; /* InfoWindow container */
}

/* Ensure proper stacking context for Google Maps elements */
.gm-style-pbc, 
.gm-style > button, 
.gm-svpc,
.gmnoprint {
  z-index: 1000 !important; /* Controls appear above map and footer */
}

/* Set priority for Google Maps elements */
.gm-style-iw-a {
  z-index: 99999 !important;
  position: absolute !important;
}

/* iPad-specific adjustments for map height, footer, and controls */
@media only screen and (min-width: 768px) and (max-width: 1366px) and (-webkit-min-device-pixel-ratio: 2) {
  #map {
    height: calc(100vh - 155px); /* Adjusted for iPad, including landscape */
    padding-bottom: env(safe-area-inset-bottom);
    padding-right: env(safe-area-inset-right);
  }

  /* Adjust footer for iPad safe area */
  #footer {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Adjust body to prevent content clipping */
  body {
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Ensure zoom controls are above footer */
.gm-style .gm-control-active.gm-zoom-in,
.gm-style .gm-control-active.gm-zoom-out {
    z-index: 1000 !important;
}

/* Hide zoom buttons on mobile devices only */
@media only screen and (max-width: 768px) {
    .gm-style .gm-control-active.gm-zoom-in,
    .gm-style .gm-control-active.gm-zoom-out {
        display: none !important;
    }
}

/* MISC Google Maps Overrides */
.gm-style-iw-chr {
  position: absolute;
  display: flex;
  top: 0;
  right: 0;
}

.gm-style-iw.gm-style-iw-c {
  padding-top: 5px !important;
}

.gm-style-iw-c,
.gm-style-iw-d,
.gm-style-iw-t,
.gm-style-iw {
  z-index: 1000 !important;
}

.gm-style div[style*="position: absolute"][style*="z-index: 106"] {
  z-index: 99999 !important;
}

.gm-style > div:nth-child(2) {
  z-index: 99999 !important;
}

.gm-style .gm-style-iw-c {
  z-index: 99999 !important;
}

.gm-style > div:nth-child(2) > div > div:last-child {
  z-index: 99999 !important;
}

.gm-style-iw-t {
  z-index: 99999 !important;
}

[style*="z-index: 106"] {
  z-index: 99999 !important;
}

[style*="z-index: 107"] {
  z-index: 99999 !important;
}

.gm-style-iw-tc, 
.gm-style-iw-bd,
.gm-style-iw-d {
  z-index: 99999 !important;
}

div[style*="cursor: default"] {
  z-index: 99999 !important;
}

button.gm-ui-hover-effect {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  z-index: 1001 !important;
  top: 0 !important;
  right: 0 !important;
  background-color: transparent !important;
}

button.gm-ui-hover-effect img, 
button.gm-ui-hover-effect span {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

.gm-style-iw-c, 
.gm-style-iw-d, 
.gm-style-iw {
  z-index: 999 !important;
} 