{% extends "base.html" %}
{% block title %}Change Password - Tamermap.com{% endblock %}
{% block content %}
<div class="page-content">
  <h1 class="center">Change Your Password</h1>
  <div class="form-container">
    {% if change_password_form.errors %}
      <div class="error-messages">
        <ul>
          {% for field, errors in change_password_form.errors.items() %}
            {% for error in errors %}
              <li>{{ error }}</li>
            {% endfor %}
          {% endfor %}
        </ul>
      </div>
    {% endif %}
    <form action="{{ url_for('security.change_password') }}" method="POST">
      {{ change_password_form.hidden_tag() }}
      <div>
        <label for="current-password">{{ change_password_form.password.label.text }}</label>
        {{ change_password_form.password(placeholder="Enter your current password", id="current-password") }}
      </div>
      <div>
        <label for="new-password">{{ change_password_form.new_password.label.text }}</label>
        {{ change_password_form.new_password(placeholder="Enter your new password", id="new-password", pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,}", title="Min 8 chars, include upper/lower and a number") }}
        <small class="text-muted">Min 8 characters with upper, lower, and a number.</small>
      </div>
      <div>
        <label for="new-password-confirm">{{ change_password_form.new_password_confirm.label.text }}</label>
        {{ change_password_form.new_password_confirm(placeholder="Confirm your new password", id="new-password-confirm") }}
      </div>
      <button type="submit">Change Password</button>
      <div style="margin-top:12px">
        <small class="text-muted">Need help? <a href="{{ url_for('security.forgot_password') }}">Reset via email</a></small>
      </div>
    </form>
  </div>
</div>
{% endblock %}
