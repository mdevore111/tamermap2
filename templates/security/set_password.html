{% extends "base.html" %}

{% block title %}Set Your TamerMap Password - Complete Account Setup{% endblock %}

{% block meta_description %}Complete your TamerMap account setup by setting a secure password. Create a strong password to protect your Pokemon card hunting account.{% endblock %}
{% block content %}
<div class="page-content">
  <h1 class="center">Set Your Password</h1>
  <div class="form-container">
    {% if form.errors %}
      <div class="error-messages">
        <ul>
          {% for field, errors in form.errors.items() %}
            {% for error in errors %}
              <li>{{ error }}</li>
            {% endfor %}
          {% endfor %}
        </ul>
      </div>
    {% endif %}
    <form method="POST">
      {{ form.hidden_tag() }}
      <div>
        <label for="{{ form.password.id }}">{{ form.password.label.text }}</label>
        {{ form.password(placeholder="Enter your password", id=form.password.id) }}
        <div id="password-strength-meter"></div>
      </div>
      <div>
        <label for="{{ form.password_confirm.id }}">{{ form.password_confirm.label.text }}</label>
        {{ form.password_confirm(placeholder="Confirm your password", id=form.password_confirm.id) }}
      </div>
      {{ form.submit() }}
    </form>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const passwordInput = document.getElementById('{{ form.password.id }}');
    if (passwordInput) {
        new PasswordStrengthMeter(passwordInput, {
            minLength: 8,
            requireUppercase: true,
            requireLowercase: true,
            requireNumbers: true,
            requireSpecialChars: false
        });
    }
});
</script>
{% endblock %}
